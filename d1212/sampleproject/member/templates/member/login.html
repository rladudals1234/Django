<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VLAST Shop - 로그인</title>
  <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="/static/css/style.css">
  <script>
    {% comment %} if('{{state_code}}'=="1"){
      alert("로그인 성공");
    }else if('{{state_code}}'=="0"){
      alert("로그인 실패! 아이디 또는 비밀번호가 일치하지 않습니다.");
      $("input[name='id']").focus();
      return
    }else if('{{state_code}}'=="-1"){
      alert("로그아웃되었습니다.");
      location.href = "/"
    } {% endcomment %}
    function loginBtn(){
      if($("input[name='id']").val().length < 1 || $("input[name='pw']").val().length < 1){
        alert("아이디 또는 비밀번호를 입력하셔야 로그인 가능합니다. ");
        $("input[name='id']").focus();
        return
      }
      var url = "{% url 'member:login' %}"
      $.ajax({
          type:'POST',
          url:url,
          data:$("#frm").serialize(),
          success:function(data){
              console.log("success",data);
              if(data.state_code=="1"){
                alert("로그인 성공");
                location.href = "/"
              }else{
                alert("로그인 실패! 아이디 또는 비밀번호가 일치하지 않습니다.");
                $("input[name='id']").focus();
              }
          },
          error : function(xhr,errmsg,err) {
              console.log(errmsg);
              alert(errmsg)
          }
      });
    }
  </script>
</head>
<body>
  <div class="header">
    <div class="top-menu">
      <a href="#">회원가입</a> |
      <a href="#">로그인</a> |
      <a href="#">주문조회</a> |
      <a href="#">최근본상품</a>
    </div>
    <div class="icons">
      <i class="fas fa-search"></i>
      <i class="fas fa-user"></i>
      <i class="fas fa-shopping-bag"></i>
    </div>
  </div>
  <div class="container">
    <div class="login-box">
      <h1>로그인</h1>
      <form action="{% url 'member:login' %}" method="post" id="frm" name="frm">
        {% csrf_token %}
        <input type="text" name="id" placeholder="아이디" class="input-box" required value="{{cook_id}}">
        <input type="password" name="pw" placeholder="비밀번호" class="input-box" required>
        <label class="checkbox-wrap">
          <input type="checkbox" name="login_keep" value="1" {% if cook_id %} checked {% endif %}>
          <span class="checkmark"></span>
          아이디 저장
        </label>
        <button type="button" onclick="loginBtn()" class="btn btn-login">로그인</button>
      </form>
      <div class="links">
        <a href="#">아이디 찾기</a> |
        <a href="#">비밀번호 찾기</a>
      </div>
      <div class="signup-box">
        <p><strong>아직 회원이 아니신가요?</strong></p>
        <p>지금 회원가입을 하시면<br>다양하고 특별한 혜택이 준비되어 있습니다.</p>
        <button class="btn-signup">회원가입</button>
      </div>
    </div>
  </div>
  <footer>
    Copyright © VLAST Shop. All rights reserved.
  </footer>
</body>
</html>