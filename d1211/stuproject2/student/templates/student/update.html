<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function updateBtn(){
            if(confirm("수정하시겠습니까?")){
                var url = "{% url 'student:update' stu.sno %}"
                $.ajax({
                    type:'POST',
                    url:url,
                    data:$("#form").serialize(),
                    success:function(data){
                        console.log("success",data);
                        alert("수정되었습니다.");
                        location.href = "{% url 'student:list' %}"
                    },
                    error : function(xhr,errmsg,err) {
                        console.log(errmsg);
                    }
                });
            }
        }
    </script>
</head>
<body>
    <h2>학생수정</h2>
    <form action="{% url 'student:update' stu.sno %}" id="form" method="post">
        {% csrf_token %}
        <label>이름</label>
        <input type='text' name='name' value='{{stu.name}}'><br>
        <label>나이</label>
        <input type='text' name='age' value='{{stu.age}}'><br>
        <label>학년</label>
        <input type='text' name='grade' value='{{stu.grade}}'><br>
        <label>성별</label><br>
        <input type='radio' name='gender' id="man" value="남자" {% if '남자' in stu.gender %}checked{% endif %}>
        <label for='man'>남자</label>
        <input type='radio' name='gender' id="woman" value="여자" {% if '여자' in stu.gender %}checked{% endif %}>
        <label for='woman'>여자</label><br>
        <label>취미</label><br>
        <input type='checkbox' name='hobby' id="game" value="게임" {% if "게임" in stu.hobby %}checked{% endif %}>
        <label for='game'>게임</label>
        <input type='checkbox' name='hobby' id="golf" value="골프" {% if "골프" in stu.hobby %}checked{% endif %}>
        <label for='golf'>골프</label>
        <input type='checkbox' name='hobby' id="swim" value="수영" {% if "수영" in stu.hobby %}checked{% endif %}>
        <label for='swim'>수영</label>
        <input type='checkbox' name='hobby' id="run" value="조깅" {% if "조깅" in stu.hobby %}checked{% endif %}>
        <label for='run'>조깅</label>
        <input type='checkbox' name='hobby' id="book" value="독서" {% if "독서" in stu.hobby %}checked{% endif %}>
        <label for='book'>독서</label><br>
        <input type='button' onclick="updateBtn()" value="학생수정"><br>
    </form>
    <ul>
        <li><a href='javascript:window.history.back()'>이전페이지 이동</a></li>
    </ul>
</body>
</html>